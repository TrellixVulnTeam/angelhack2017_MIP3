{"_id":"node-humix-sense","_rev":"1-127e879136ee34a179e1ef526735dd99","name":"node-humix-sense","description":"Foundation for Humix-Sense modules","dist-tags":{"latest":"1.0.0"},"versions":{"1.0.0":{"name":"node-humix-sense","version":"1.0.0","description":"Foundation for Humix-Sense modules","main":"index.js","directories":{"test":"test"},"scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"author":{"name":"Jeffrey Liu, jeffffrey@gmail.com"},"license":"Apache-2.0","dependencies":{"debug":"^2.2.0","events":"^1.0.2","nats":"^0.2.9","respawn":"^2.0.0","util":"^0.10.3"},"devDependencies":{"chai":"^3.3.0"},"repository":{"type":"git","url":"git+https://github.com/project-humix/node-humix-sense.git"},"keywords":["humix","sensor"],"bugs":{"url":"https://github.com/project-humix/node-humix-sense/issues"},"homepage":"https://github.com/project-humix/node-humix-sense#readme","gitHead":"2b25f8114feb7fbb2e21be53d9c32042a633ddd4","_id":"node-humix-sense@1.0.0","_shasum":"814648166430f295a14cf1dabe890e43f16ac989","_from":".","_npmVersion":"2.10.1","_nodeVersion":"0.12.4","_npmUser":{"name":"jeffffrey","email":"jeffffrey@gmail.com"},"dist":{"shasum":"814648166430f295a14cf1dabe890e43f16ac989","tarball":"https://registry.npmjs.org/node-humix-sense/-/node-humix-sense-1.0.0.tgz"},"maintainers":[{"name":"jeffffrey","email":"jeffffrey@gmail.com"}]}},"readme":"\n## Introduction\n\nEssentially, a `humix-sense` module communicate with other modules and the local controller using NATS-based pub/sub messaging model : each module provide the information it collects by publishing 'event', while it also listen for 'command' to trigger actions the module supports. \n\nThis module provides an event-driven model to facilitate the creation of Humix-Sense modules. Basically, you need to proivde a config to specify \n    1) the name of the module\n    2) the commands the module accepts\n    3) the event the module generates\n    4) any child process the module depends upon ( optional )\n\nWith such information, `humix-sense` module could automatically generate the namespace for each event generated and monitor the local message bus for incoming commands targeted for this module. In addition, the `humix-sense` module also facilitates life-cycle management of the sensor module: it register the module during start up, monitoring the health check events(e.g. Ping/Pong) and commands (e.g. Stop) from local contorller.\n\nThe goal is to simplify the effort required for new sensor modules to communicate with the rest of Humix components, including other sensor modules and `Humix Think` ( the brain)\n\n\n## How to get the code\n\nYou can either clone the project of this repository\n\n```\ngit clone https://github.com/project-humix/node-humix-sense.git\n```\n\nor get the module from npm repository \n\n```javascript\nnpm install node-humix-sense\n```\n\n\n## How to use\n\nYou can use this module to build a new sensor module for Humix. Here are the steps you needs:\n\n1. config your module\n2. register your module\n3. send events, if any\n4. receive commands, if any\n\n\n\n### Provide module information\n\nThe following code shows how to config your module and register it with Humix. \n\n```javascript\n\n // provide default config. If not provided, the module will lookup module.js in current dir to load the config\n \n var config = {\n\n \n    // define the namespace of this module\n    \"moduleName\":\"test\",\n\n    // specify the commands to monitor\n    \"commands\" : [ \"command1\", \"command2\"],\n\n    // (optional)\n    // specify the events that will be gneerated by this module.\n    // If not specified, all events generated with event() function will be emitted\n    \"events\" : [\"event1\",\"event2\"],\n\n    // (optional)\n    // if the module is implemented using other language, specify the process to lunch here\n    \"childProcess\" : {\n        \"name\" : \"./test/test.sh\",\n        \"params\" : \"7\",\n        \"respawn\" : true,\n        \"restart\" : 3\n    },\n    \"debug\": true\n }\n \n \nvar humix = require('humix-sense')(config);,\n\n```\n\nBasically you pass the config to the humix-sense module. The module will then register the current sensor with local humix-sense-controller. \n\nThe next step is to wait for the confirmation from humix-sense-controller\n\n```javascript\n\n humix.on('connection', function(humixSensorModule){\n       hsm = humixSensorModule;\n }\n```\n\n### Generate events\n\nOnce you get the `HumixSensorModule` object, you can then generate events with simple syntax like:\n\n```javascript\n hsm.event('event1', 'Hello World');\n```\n\n### Listen for commands\n\nand now you can receive command by monitoring the registered commands:\n\n```javascript\n\nhsm.on('command1', function(data){\n    console.log('receive data');\n});\n```\n\n\n### Life cycle management\n\nWhen the humix-sense-controller wants to terminate a process, it publishes a 'stop' command. This allow each module process to terminate gracefully. \n\n```javascript\n  humix.on('stop', function(){\n      // do your cleanup tasks here \n  });\n```\n\n## License\n\nThis module is released under Apache 2.0 license","maintainers":[{"name":"jeffffrey","email":"jeffffrey@gmail.com"}],"time":{"modified":"2015-09-29T02:24:07.315Z","created":"2015-09-29T02:24:07.315Z","1.0.0":"2015-09-29T02:24:07.315Z"},"homepage":"https://github.com/project-humix/node-humix-sense#readme","keywords":["humix","sensor"],"repository":{"type":"git","url":"git+https://github.com/project-humix/node-humix-sense.git"},"author":{"name":"Jeffrey Liu, jeffffrey@gmail.com"},"bugs":{"url":"https://github.com/project-humix/node-humix-sense/issues"},"license":"Apache-2.0","readmeFilename":"README.md","_attachments":{},"_etag":"\"EP64UYDRHPDEMPGP43KVXJ6T2\""}